<ion-view sb-page-background class="module-cms cms-l1" can-swipe-back="false">
    <ion-nav-title>{{ page_title }}</ion-nav-title>
    <ion-nav-buttons side="secondary">
        <button ng-show="social_sharing_active" class="button button-clear" ng-click="share()">
            <i class="icon ion-ios-upload-outline"></i>
        </button>
    </ion-nav-buttons>

    <ion-content ng-class="{ 'has-tabs' : template_tabs && footer_is_tabs, 'inbox-content' : (module_code == 'inbox') }">

        <div class="loader" ng-show="is_loading">
            <ion-spinner class="spinner-custom"></ion-spinner>
        </div>

        <ion-refresher ng-if="use_pull_to_refresh" class="spinner-custom" pulling-text="{{ 'Pull to refresh...' | translate }}" on-refresh="pullToRefresh()"></ion-refresher>

        <div ng-include="template_header"></div>

        <div ng-repeat="block in blocks" ng-if="!is_loading">

            <div ng-switch on="block.type">
                <ion-card class="card" ng-switch-when="text">
                    <div sb-cms-text block="block"></div>
                </ion-card>
                <ion-card class="card" ng-switch-when="image">
                    <div sb-cms-image block="block" gallery="gallery"></div>
                </ion-card>
                <ion-card class="card" ng-switch-when="slider">
                    <div sb-cms-slider block="block" gallery="gallery"></div>
                </ion-card>
                <ion-card class="card" ng-switch-when="video">
                    <div sb-cms-video block="block"></div>
                </ion-card>
                <ion-card class="card" ng-switch-when="address">
                    <div sb-cms-address block="block"></div>
                </ion-card>
                <ion-card class="card" ng-switch-when="button">
                    <div sb-cms-button block="block"></div>
                </ion-card>
                <ion-card class="card" ng-switch-when="file">
                    <div sb-cms-file block="block"></div>
                </ion-card>
                <ion-card class="card no-shadow" ng-switch-when="cover">
                    <div sb-cms-cover block="block"></div>
                </ion-card>
            </div>

        </div>

        <div ng-include="template_footer"></div>

    </ion-content>

    <div ng-include="template_tabs"></div>

</ion-view>